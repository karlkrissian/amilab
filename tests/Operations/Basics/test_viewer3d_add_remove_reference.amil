#!/usr/bin/amilab

#SetDebugOn
#SetVerboseOn

NoMessageDialog(1)

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# test_viewer3d_add_remove.amil
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# Check the following methods:
#                              - AddObject
#                              - += (add_assign)
#                              - -= (sub_assign)
#                              - Remove
#                              - & (reference)
#                              - Center
#                              - Normalize
#                              - Paint
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

func "ctest/ctest_config.amil"

OK = 1 # The test was successful

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

printn "\t\t ******************************************"
printn "\t\t *                 WARNING                *"
printn "\t\t ******************************************"
printn "\t\t *                                        *"
printn "\t\t * This test does not perform useful work *"
printn "\t\t * ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ *"
printn "\t\t *                                        *"
printn "\t\t * Just check:                            *"
printn "\t\t * - The parser does not generate errors. *"
printn "\t\t * - Segmentation fault does not occur.   *"
printn "\t\t *                                        *"
printn "\t\t ******************************************\n"

# Create initial image
func "SyntheticImages/CreateTorus/CreateTorusClass.amil"
CreateTorusClass ctobject
ctobject.Create()
printn " Create synthetic imaged."


printn "\t\t Create an object of class Viewer3D (viewer).\n"
viewer=Viewer3D()

printn "\t\t Create an object of class SurfacePoly (surf).\n"
surf=isosurf(torus,50.1)

printn "\t\t Add the SurfacePoly object to the viewer (AddObject).\n"
viewer.AddObject(surf)

printn "\t\t Centers the 3D view (Center).\n"
viewer.Center()

printn "\t\t  Normalizes the 3D view based (Normalize).\n"
viewer.Normalize()

printn "\t\t  Updating the scene information (Paint).\n"
viewer.Paint()

printn "\t\t Remove the SurfacePoly object to the viewer (Remove).\n"
viewer.Remove(surf)

printn "\t\t Add the SurfacePoly object to the viewer (Operator +=).\n"
viewer+=surf

printn "\t\t Centers the 3D view (Center).\n"
viewer.Center()

printn "\t\t  Normalizes the 3D view based (Normalize).\n"
viewer.Normalize()

printn "\t\t  Updating the scene information (Paint).\n"
viewer.Paint()

printn "\t\t Remove the SurfacePoly object to the viewer (Operator -=).\n"
viewer-=surf

printn "\t\t Create new reference variable (Operator &): viewer2.\n"
viewer2 = &viewer

printn "\t\t viewer2: Add the SurfacePoly object to the viewer (Operator +=).\n"
viewer2+=surf

printn "\t\t viewer2: Centers the 3D view (Center).\n"
viewer2.Center()

printn "\t\t viewer2: Normalizes the 3D view based (Normalize).\n"
viewer2.Normalize()

printn "\t\t viewer2: Updating the scene information (Paint).\n"
viewer2.Paint()

printn "\t\t viewer2: Remove the SurfacePoly object to the viewer (Operator -=).\n"
viewer2-=surf

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

ctest.PrintTestResult( OK ) 

#quit

