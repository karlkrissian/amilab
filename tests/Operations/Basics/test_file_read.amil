#!/usr/bin/amilab

#SetDebugOn
#SetVerboseOn

NoMessageDialog(1)

# Hide main frame
ami.MainFrame.ShowWin(0)

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# test_file_read.amil
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# Check the following methods:
#                              - open
#                              - close
#                              - print
#                              - read
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

func "ctest/ctest_config.amil"

OK = 1 # The test was successful

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

printn "\t\t Create an object of class File(file = File(\"test_read_string.txt\", \"w\")).\n"
file=File("test_read_string.txt", "w")

printn "\t\t Write Hello(file._print(\"Hello \")).\n"
file._print("Hello ")

printn "\t\t Close the file(Deprecated)).\n"
file.close()

#******************************************************************************

printn "\t\t Create an object of class File(file1 = File(\"test_read_float.txt\", \"w\")).\n"
file1=File("test_read_float.txt", "w")

VAL = 10.10

printn "\t\t Write VAL value(file._print(VAL)).\n"
file1._print(VAL)

printn "\t\t Close the file(Deprecated)).\n"
file1.close()

#******************************************************************************

printn "\t\t Create an object of class File(newFile = File(\"test_read_string.txt\", \"r\")).\n"
newFile=File("test_read_string.txt", "r")

printn "\t\t Read the file: test_read_string.txt (newFile.read_string(firstValue)).\n"
firstValue = ""
newFile.read(&firstValue)

printn "\t\t Close the file(Deprecated)).\n"
newFile.close()

#******************************************************************************

printn "\t\t Create an object of class File(newFile1 = File(\"test_read_float.txt\", \"r\")).\n"
newFile1=File("test_read_float.txt", "r")

printn "\t\t Read the file: test_read_float.txt (newFile1.read(&RES)).\n"
RES = 0.0
newFile1.read(&RES)

printn "\t\t Close the file(Deprecated)).\n"
newFile1.close()


printn "\t\t firstValue =%1%\n" % firstValue
printn "\t\t RES =%1%\n" % RES

if((firstValue != "Hello") && (RES != 10.10)) {
  OK = 0
  printn  "\nERROR: The reading does not match the value written."
}

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

ctest.PrintTestResult( OK ) 

#quit

